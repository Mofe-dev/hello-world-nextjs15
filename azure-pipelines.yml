trigger:
  branches:
    include:
      - main  # Cambia "main" por la rama que uses

pool:
  vmImage: 'ubuntu-latest'

variables:
  APP_SERVICE_NAME: 'sgp-app' # Cambia por el nombre de tu App Service

steps:
  - task: NodeTool@0
    inputs:
      version: '18.x'
    displayName: 'Set Node.js version'

  - script: |
      npm cache clean --force
      rm -rf node_modules
      npm install
    displayName: 'Limpieza y reinstalaci√≥n de dependencias'


  - script: |
      npm install
      npm run build
    displayName: 'Instalar dependencias y compilar proyecto'

  - task: AzureWebApp@1
    inputs:
      azureSubscription: 'sgp_sc'
      appType: 'webAppLinux'  # Cambia a 'webApp' si tu App Service es Windows
      appName: '$(APP_SERVICE_NAME)'
      package: '.'
    displayName: 'Deploy a Azure App Service'
